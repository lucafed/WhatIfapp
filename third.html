<!doctype html><html lang="it">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>What?f ‚Äî Domande</title>
  <link rel="stylesheet" href="style.css?v=7">
</head>
<body>
  <section class="screen">
    <div class="bg-cover"></div>
    <div class="wrap">
      <h2>Imposta la simulazione</h2>
      <h1>Passato o Futuro, scegli la porta</h1>

      <form class="form" onsubmit="return false">
        <!-- Tempo -->
        <div class="group">
          <div class="label">Tempo</div>
          <div class="row">
            <label class="badge"><input type="radio" name="tempo" value="passato" checked>Passato</label>
            <label class="badge"><input type="radio" name="tempo" value="futuro">Futuro</label>
          </div>
        </div>

        <!-- Scenario -->
        <div class="group">
          <div class="label">Scenario</div>
          <div class="row">
            <label class="badge"><input type="radio" name="scen" value="sd" checked>Sliding Doors (realistico)</label>
            <label class="badge"><input type="radio" name="scen" value="wtf">What the F?! (ironico)</label>
          </div>
        </div>

        <!-- Profilo minimo -->
        <div class="group row">
          <div>
            <div class="label">Et√†</div>
            <input id="eta" type="number" min="12" max="99" placeholder="es. 29">
          </div>
          <div>
            <div class="label">Genere</div>
            <select id="genere">
              <option>Preferisco non dirlo</option><option>Donna</option><option>Uomo</option><option>Non binario</option>
            </select>
          </div>
          <div>
            <div class="label">Luogo</div>
            <input id="luogo" type="text" placeholder="citt√† / area">
          </div>
        </div>

        <div class="group row">
          <div>
            <div class="label">Lavoro</div>
            <input id="lavoro" type="text" placeholder="impiego / settore">
          </div>
          <div>
            <div class="label">Amore</div>
            <input id="amore" type="text" placeholder="single, relazione, ecc.">
          </div>
        </div>

        <!-- Interessi -->
        <div class="group">
          <div class="label">Interessi</div>
          <div class="badges" id="interessiBox">
            <!-- toggles -->
            <label class="badge"><input type="checkbox" name="interessi" value="viaggi">Viaggi</label>
            <label class="badge"><input type="checkbox" name="interessi" value="startup">Startup</label>
            <label class="badge"><input type="checkbox" name="interessi" value="arte">Arte</label>
            <label class="badge"><input type="checkbox" name="interessi" value="sport">Sport</label>
            <label class="badge"><input type="checkbox" name="interessi" value="cucina">Cucina</label>
          </div>
        </div>

        <!-- Prompt principale -->
        <div class="group">
          <div class="label">La tua domanda</div>
          <input id="prompt" type="text" placeholder="What?f ‚Ä¶ se oggi mollassi tutto per inseguire un sogno?">
        </div>

        <!-- Extra opzionale -->
        <div class="group">
          <div class="label">Dettagli extra (opzionale)</div>
          <textarea id="extra" rows="3" placeholder="Aggiungi contesto per rendere la risposta super personale‚Ä¶"></textarea>
        </div>

        <div style="display:flex; gap:12px; justify-content:center; margin-top:12px">
          <button id="askBtn" class="btn" type="button" title="Apri la porta">üö™ Apri la porta</button>
        </div>
      </form>
    </div>

    <div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot active"></span></div>
    <div class="swipe-hint">‚Üê Swipe ‚Ä¢ Risposta ‚Üí</div>
  </section>

  <script>
    // badge attivi
    document.querySelectorAll('.badge input').forEach(inp=>{
      inp.addEventListener('change',()=>inp.closest('.badge').classList.toggle('active', inp.checked || inp.type==='radio' && inp.checked));
      inp.closest('.badge').classList.toggle('active', inp.checked);
    });

    // salva e vai alla 4¬™
    document.getElementById('askBtn').addEventListener('click',()=>{
      const payload={
        tempo: document.querySelector('input[name="tempo"]:checked')?.value||'passato',
        scenario: document.querySelector('input[name="scen"]:checked')?.value||'sd',
        eta: document.getElementById('eta').value.trim(),
        genere: document.getElementById('genere').value,
        luogo: document.getElementById('luogo').value.trim(),
        lavoro: document.getElementById('lavoro').value.trim(),
        amore: document.getElementById('amore').value.trim(),
        interessi: [...document.querySelectorAll('input[name="interessi"]:checked')].map(i=>i.value),
        prompt: document.getElementById('prompt').value.trim(),
        extra: document.getElementById('extra').value.trim(),
      };
      localStorage.setItem('whatif:last', JSON.stringify(payload));
      location.href='fourth.html';
    });

    // swipe
    let x0=null; addEventListener('touchstart',e=>x0=e.touches[0].clientX,{passive:true});
    addEventListener('touchend',e=>{ if(x0==null) return; const dx=e.changedTouches[0].clientX-x0;
      if(dx>50) location.href='second.html'; if(dx<-50) location.href='fourth.html'; x0=null; },{passive:true});
  </script>
</body></html>
