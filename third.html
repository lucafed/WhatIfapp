<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>What?f ‚Äì Domande</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <main class="screen" id="p3">
    <div class="bg-cover" style="background-image:linear-gradient(120deg,#07131a, #0A0F14 60%)"></div>
    <div class="bg-overlay" style="background:radial-gradient(60% 50% at 50% 30%, rgba(0,224,255,.10), transparent 60%), linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.85))"></div>

    <div style="width:min(960px,92vw);text-align:left">
      <div class="kicker accent-turquoise">Imposta la simulazione</div>
      <h1 class="h1">Passato o Futuro, <span class="accent-lime">scegli la porta</span></h1>

      <div class="form">
        <!-- Tempo -->
        <div class="label">Tempo</div>
        <div class="toggle" id="tempo">
          <div class="chip active" data-v="past">Passato</div>
          <div class="chip" data-v="future">Futuro</div>
        </div>

        <!-- Scenario -->
        <div class="label" style="margin-top:12px">Scenario</div>
        <div class="toggle" id="scenario">
          <div class="chip active" data-v="sliding">Sliding Doors (realistico)</div>
          <div class="chip" data-v="whataf">What the F?! (ironico)</div>
        </div>

        <!-- Domande mirate -->
        <div class="row" style="margin-top:14px">
          <div>
            <div class="label">Et√†</div>
            <input class="input" id="age" type="number" min="8" max="99" placeholder="es. 29"/>
          </div>
          <div>
            <div class="label">Genere</div>
            <select class="input" id="gender">
              <option value="">Preferisco non dirlo</option>
              <option value="donna">Donna</option>
              <option value="uomo">Uomo</option>
              <option value="non-binario">Non binario</option>
              <option value="altro">Altro</option>
            </select>
          </div>
        </div>

        <div class="row" style="margin-top:12px">
          <div>
            <div class="label">Luogo (citt√†/paese)</div>
            <input class="input" id="location" placeholder="es. Milano, IT"/>
          </div>
          <div>
            <div class="label">Ambito (lavoro, amore, studio, altro)</div>
            <select class="input" id="topic">
              <option value="generale">Generale</option>
              <option value="lavoro">Lavoro</option>
              <option value="amore">Amore</option>
              <option value="studio">Studio</option>
              <option value="famiglia">Famiglia</option>
              <option value="salute">Salute</option>
              <option value="altro">Altro</option>
            </select>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="label">Domanda (inizia con ‚ÄúWhat?f ‚Ä¶‚Äù)</div>
          <input class="input" id="question" placeholder="What?f avessi accettato quel lavoro a Londra?"/>
        </div>

        <div style="margin-top:12px">
          <div class="label">Dettagli opzionali (aiuta a personalizzare)</div>
          <textarea id="extra" placeholder="Aggiungi dettagli utili, es: settore, relazione, tempistiche, preferenze‚Ä¶"></textarea>
        </div>

        <div class="actions">
          <button class="btn" id="openDoor" aria-label="Apri la porta">üîì Apri la porta</button>
          <a class="btn btn-ghost" href="second.html">‚Üê Indietro</a>
        </div>
      </div>
    </div>

    <div class="swipe-hint" aria-hidden="true">
      <div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot active"></span></div>
      <span>‚Üê Swipe</span>
    </div>
  </main>

  <script>
    // Toggle helpers
    function setupToggle(id){
      const box=document.getElementById(id);
      box.addEventListener('click',e=>{
        const chip=e.target.closest('.chip'); if(!chip) return;
        [...box.querySelectorAll('.chip')].forEach(c=>c.classList.remove('active'));
        chip.classList.add('active');
      });
    }
    setupToggle('tempo'); setupToggle('scenario');

    // Button to 4th page
    document.getElementById('openDoor').addEventListener('click', ()=>{
      const tempo = document.querySelector('#tempo .chip.active').dataset.v;
      const scn = document.querySelector('#scenario .chip.active').dataset.v;
      const age = document.getElementById('age').value.trim();
      const gender = document.getElementById('gender').value.trim();
      const location = document.getElementById('location').value.trim();
      const topic = document.getElementById('topic').value.trim();
      const question = document.getElementById('question').value.trim();
      const extra = document.getElementById('extra').value.trim();

      const params = new URLSearchParams({
        tempo, scn, age, gender, location, topic, question, extra
      });
      location.href = 'fourth.html?' + params.toString();
    });

    // Swipe: destra => second.html
    (function(){
      let x0=null; const TH=35;
      const el=document.getElementById('p3');
      el.addEventListener('touchstart',e=>x0=e.touches[0].clientX,{passive:true});
      el.addEventListener('touchend',e=>{
        if(x0==null) return;
        const dx=e.changedTouches[0].clientX-x0;
        if(dx>TH) location.href='second.html';
        x0=null;
      },{passive:true});
    })();
  </script>
</body>
</html>
