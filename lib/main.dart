import 'package:flutter/material.dart';

void main() => runApp(const WhatifApp());

class AppColors {
  static const primary = Color(0xFF00E0FF); // turchese logo
    static const primaryVariant = Color(0xFF00B5CC);
      static const highlight = Color(0xFF1AFFD5);
      }

      ThemeData buildLightTheme() {
        final scheme = ColorScheme.fromSeed(
            seedColor: AppColors.primary,
                brightness: Brightness.light,
                    primary: AppColors.primary,
                      );
                        return ThemeData(
                            colorScheme: scheme,
                                useMaterial3: true,
                                    scaffoldBackgroundColor: Colors.white,
                                        appBarTheme: const AppBarTheme(centerTitle: true),
                                            inputDecorationTheme: const InputDecorationTheme(border: OutlineInputBorder()),
                                                elevatedButtonTheme: ElevatedButtonThemeData(
                                                      style: ElevatedButton.styleFrom(minimumSize: const Size.fromHeight(48)),
                                                          ),
                                                              outlinedButtonTheme: OutlinedButtonThemeData(
                                                                    style: OutlinedButton.styleFrom(minimumSize: const Size.fromHeight(48)),
                                                                        ),
                                                                          );
                                                                          }

                                                                          class WhatifApp extends StatelessWidget {
                                                                            const WhatifApp({super.key});
                                                                              @override
                                                                                Widget build(BuildContext context) {
                                                                                    return MaterialApp(
                                                                                          title: 'Whatifapp',
                                                                                                debugShowCheckedModeBanner: false,
                                                                                                      theme: buildLightTheme(), // Light di default
                                                                                                            home: const HomePage(),
                                                                                                                );
                                                                                                                  }
                                                                                                                  }

                                                                                                                  enum ScenarioType { slidingDoors, whatTheF }

                                                                                                                  class HomePage extends StatefulWidget {
                                                                                                                    const HomePage({super.key});
                                                                                                                      @override
                                                                                                                        State<HomePage> createState() => _HomePageState();
                                                                                                                        }

                                                                                                                        class _HomePageState extends State<HomePage> {
                                                                                                                          ScenarioType _scenario = ScenarioType.slidingDoors;
                                                                                                                            bool _isFuture = true; // Passato ↔ Futuro (true = Futuro)
                                                                                                                              final _controller = TextEditingController();

                                                                                                                                @override
                                                                                                                                  void dispose() {
                                                                                                                                      _controller.dispose();
                                                                                                                                          super.dispose();
                                                                                                                                            }

                                                                                                                                              Widget _scenarioChip(ScenarioType type, String label, IconData icon) {
                                                                                                                                                  final selected = _scenario == type;
                                                                                                                                                      return ChoiceChip(
                                                                                                                                                            selected: selected,
                                                                                                                                                                  label: Row(mainAxisSize: MainAxisSize.min, children: [
                                                                                                                                                                          Icon(icon, size: 18),
                                                                                                                                                                                  const SizedBox(width: 6),
                                                                                                                                                                                          Text(label),
                                                                                                                                                                                                ]),
                                                                                                                                                                                                      selectedColor: AppColors.primary.withOpacity(.15),
                                                                                                                                                                                                            onSelected: (_) => setState(() => _scenario = type),
                                                                                                                                                                                                                );
                                                                                                                                                                                                                  }

                                                                                                                                                                                                                    void _openDoor() {
                                                                                                                                                                                                                        FocusScope.of(context).unfocus();
                                                                                                                                                                                                                            if (_controller.text.trim().isEmpty) {
                                                                                                                                                                                                                                  ScaffoldMessenger.of(context).showSnackBar(
                                                                                                                                                                                                                                          const SnackBar(content: Text('Scrivi una domanda prima di aprire la porta.')),
                                                                                                                                                                                                                                                );
                                                                                                                                                                                                                                                      return;
                                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                              final scenarioName =
                                                                                                                                                                                                                                                                      _scenario == ScenarioType.slidingDoors ? 'Sliding Doors' : 'What the F.?';
                                                                                                                                                                                                                                                                          final timeSide = _isFuture ? 'Futuro' : 'Passato';
                                                                                                                                                                                                                                                                              showDialog(
                                                                                                                                                                                                                                                                                    context: context,
                                                                                                                                                                                                                                                                                          builder: (_) => AlertDialog(
                                                                                                                                                                                                                                                                                                  title: const Text('Porta aperta 🚪'),
                                                                                                                                                                                                                                                                                                          content: Text('Scenario: $scenarioName\nLato: $timeSide\nDomanda: ${_controller.text}'),
                                                                                                                                                                                                                                                                                                                  actions: [TextButton(onPressed: () => Navigator.pop(context), child: const Text('OK'))],
                                                                                                                                                                                                                                                                                                                        ),
                                                                                                                                                                                                                                                                                                                            );
                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                void _reset() {
                                                                                                                                                                                                                                                                                                                                    setState(() {
                                                                                                                                                                                                                                                                                                                                          _controller.clear();
                                                                                                                                                                                                                                                                                                                                                _scenario = ScenarioType.slidingDoors;
                                                                                                                                                                                                                                                                                                                                                      _isFuture = true;
                                                                                                                                                                                                                                                                                                                                                          });
                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                              @override
                                                                                                                                                                                                                                                                                                                                                                Widget build(BuildContext context) {
                                                                                                                                                                                                                                                                                                                                                                    return Scaffold(
                                                                                                                                                                                                                                                                                                                                                                          appBar: AppBar(title: const Text('Whatifapp')),
                                                                                                                                                                                                                                                                                                                                                                                body: SafeArea(
                                                                                                                                                                                                                                                                                                                                                                                        child: ListView(
                                                                                                                                                                                                                                                                                                                                                                                                  padding: const EdgeInsets.all(16),
                                                                                                                                                                                                                                                                                                                                                                                                            children: [
                                                                                                                                                                                                                                                                                                                                                                                                                        Center(
                                                                                                                                                                                                                                                                                                                                                                                                                                      child: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                      'What?f',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      style: TextStyle(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        fontSize: 40,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          fontWeight: FontWeight.w800,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: AppColors.primary,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              letterSpacing: .5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const SizedBox(height: 16),

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Text('Scegli una porta:', style: Theme.of(context).textTheme.titleMedium),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const SizedBox(height: 8),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Wrap(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      spacing: 8,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    runSpacing: 8,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  _scenarioChip(ScenarioType.slidingDoors, 'Sliding Doors', Icons.door_front_door),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  _scenarioChip(ScenarioType.whatTheF, 'What the F.?', Icons.bolt),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const SizedBox(height: 16),

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Row(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  mainAxisAlignment: MainAxisAlignment.spaceBetween,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const Text('Passato'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Switch(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  value: _isFuture,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    activeColor: AppColors.primary,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onChanged: (v) => setState(() => _isFuture = v),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const Text('Futuro'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const SizedBox(height: 16),

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        TextField(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      controller: _controller,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    textInputAction: TextInputAction.done,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  decoration: const InputDecoration(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  prefixText: 'What?f ',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  hintText: 'scrivi la tua domanda…',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onSubmitted: (_) => _openDoor(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const SizedBox(height: 16),

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ElevatedButton.icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                onPressed: _openDoor,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              icon: const Icon(Icons.meeting_room_outlined),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            label: const Text('Apri la Porta'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const SizedBox(height: 8),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                OutlinedButton.icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onPressed: _reset,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            icon: const Icon(Icons.refresh),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          label: const Text('Nuova domanda'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const SizedBox(height: 24),

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Card(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            elevation: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          color: Colors.grey.shade100,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        child: const ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        leading: Icon(Icons.door_front_door),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        title: Text('Sliding Doors: realistico, “cosa sarebbe successo…”.'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const SizedBox(height: 8),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Card(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        elevation: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      color: Colors.grey.shade100,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    child: const ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    leading: Icon(Icons.bolt),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    title: Text('What the F.?: ironico e divertente (ma non totalmente folle).'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            bottomNavigationBar: NavigationBar(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    selectedIndex: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            onDestinationSelected: (_) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ScaffoldMessenger.of(context).showSnackBar(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const SnackBar(content: Text('Cronologia ed Esplora arrivano tra poco 😉')),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            destinations: const [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      NavigationDestination(icon: Icon(Icons.home_outlined), label: 'Home'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                NavigationDestination(icon: Icon(Icons.history), label: 'Cronologia'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          NavigationDestination(icon: Icon(Icons.explore_outlined), label: 'Esplora'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }
